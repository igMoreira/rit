import java.io.IOException;
import java.net.UnknownHostException;


public class PubDice {

	
	public static void main(String[] args) {
		PubDiceUI view = new PubDiceUI();
		view.setTitle("My Pub Dice client");
		view.setVisible(true);
		
		ServerProxy model = null;
		try {
			model = new ServerProxy();
		} catch (UnknownHostException e) {
			System.out.printf("CONNECTION ERROR: Error trying connect to host\n");
			e.printStackTrace();
			System.exit(0);
		} catch (IOException e) {
			System.out.printf("CONNECTION ERROR: Error trying to get server I/O\n");
			e.printStackTrace();
			System.exit(1);
		}
		
		// Sets a model for the request controller so it can delegate requests
		RequestController requestController = new RequestController(model);
		
		// Creates the response controller and adds it as a "listener" to the receiver thread
		ResponseController responseController = new ResponseController("Someone", view);
		model.getReceiver().subscribe(responseController);
		
		requestController.startMatch("Someone");
	}
}
